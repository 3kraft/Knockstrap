/*! knockstrap 24-10-2013 */
!function(a,b){"use strict";"function"==typeof require&&"undefined"!=typeof module&&exports||("function"==typeof define&&define.amd?define(a,["knockout","jQuery"],b):b(ko,$))}("knockstrap",function(a,b){a.utils.uniqueId=function(){var a=0;return function(b){var c=b||"ks-unique-";return c+a++}}(),a.utils.unwrapProperties=function(b){var c={};return a.utils.objectForEach(b,function(b,d){c[b]=a.unwrap(d)}),c},a.stringTemplateEngine=function(){var b={},c=new a.nativeTemplateEngine;return b.alert='<div class="alert alert-block fade in" data-bind="css: type"> <button class="close" data-bind="click: close" aria-hidden="true">&times;</button> <p data-bind="text: message"></p> </div>',b.modal='<div class="modal-dialog"> <div class="modal-content"> <div class="modal-header" data-bind="template: headerTemplate"> </div> <div class="modal-body" data-bind="template: bodyTemplate"> </div> <div class="modal-footer" data-bind="template: footerTemplate"> </div> </div> </div>',b.modalBody='<div data-bind="html: content"> </div>',b.modalFooter='<a href="#" class="btn btn-primary" data-bind="click: action, html: primaryLabel"></a> <a href="#" class="btn btn-default" data-bind="html: closeLabel" data-dismiss="modal"></a>',b.modalHeader='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button> <h3 data-bind="text: label"></h3> ',b.progress='<div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="style: { width: barWidth }, attr: { \'aria-valuenow\' : value }"> <span class="sr-only"><span data-bind="text: value"></span>% Complete</span> </div> ',a.templateSources.stringTemplate=function(a){this.templateName=a,this.data=function(a,c){return b.data=this.templates.data||{},b.data[this.templateName]=this.templates.data[this.templateName]||{},1===arguments.length?b.data[this.templateName][a]:(b.data[this.templateName][a]=c,void 0)},this.text=function(a){return 0===arguments.length?b[this.templateName]:(b[this.templateName]=a,void 0)}},c.makeTemplateSource=function(b){return new a.templateSources.stringTemplate(b)},c.addTemplate=function(a,c){b[a]=c},c},a.stringTemplateEngine.instance=new a.stringTemplateEngine,a.bindingHandlers.alert={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){var d=c(),e=d.template?null:a.stringTemplateEngine.instance,f=a.unwrap(d.template)||"alert",g=d.data||{message:d.message,type:a.computed(function(){return"alert-"+(a.unwrap(d.type)||"info")}),close:d.close||function(){a.virtualElements.emptyNode(b)}};a.renderTemplate(f,g,a.utils.extend({templateEngine:e},d.templateOptions),b)}},a.virtualElements.allowedBindings.alert=!0,a.bindingHandlers.modal={defaults:{headerTemplate:{name:"modalHeader"},bodyTemplate:{name:"modalBody"},footerTemplate:{name:"modalFooter",data:{closeLabel:"Close",primaryLabel:"Ok"}}},init:function(c,d,e,f,g){var h=b(c),i=a.unwrap(d()),j=a.bindingHandlers.modal.defaults,k=a.utils.extend({show:!1},a.utils.unwrapProperties(i.options));if(!i.header||!i.body||!i.footer)throw new Error("Header, body and footer properties are required for modal!");var l={headerTemplate:b.extend(!0,{templateEngine:i.header.name?null:a.stringTemplateEngine.instance},j.headerTemplate,i.header),bodyTemplate:b.extend(!0,{templateEngine:i.body.name?null:a.stringTemplateEngine.instance},j.bodyTemplate,i.body),footerTemplate:b.extend(!0,{templateEngine:i.footer.name?null:a.stringTemplateEngine.instance},j.footerTemplate,i.footer)};return a.renderTemplate("modal",g.createChildContext(l),{templateEngine:a.stringTemplateEngine.instance},c),h.addClass("modal fade").attr("role","dialog"),h.modal(k),h.on("shown.bs.modal",function(){i.visible(!0)}),h.on("hidden.bs.modal",function(){i.visible(!1)}),{controlsDescendantBindings:!0}},update:function(c,d){var e=a.unwrap(d());b(c).modal(a.unwrap(e.visible)?"show":"hide")}};var c="__popoverTemplateKey__",d="__popoverEventHandlerKey__";a.bindingHandlers.popover={init:function(c){var d=b(c);return a.utils.domNodeDisposal.addDisposeCallback(c,function(){d.data("bs.popover")&&d.popover("destroy")}),{controlsDescendantBindings:!0}},update:function(e,f){var g=b(e),h=a.unwrap(f()),i=a.utils.unwrapProperties(h.options);if("template"in h){var j=a.unwrap(h.template),k=a.utils.domData.get(e,c),l=a.unwrap(h.data);k||(k=a.utils.uniqueId("ks-popover-"),a.utils.domData.set(e,c,k)),g.off("shown.bs.popover",a.utils.domData.get(e,d));var m=function(){a.renderTemplate(j,l,{},document.getElementById(k))};g.on("shown.bs.popover",m),a.utils.domData.set(e,d,m),i.content='<div id="'+k+'" ></div>',i.html=!0,b(k).is(":visible")&&m()}var n=g.data("bs.popover");n?a.utils.extend(n.options,i):g.popover(i)}},a.bindingHandlers.progress={init:function(c,d){var e=b(c),f=d(),g=a.computed(function(){return a.unwrap(f)+"%"});return a.renderTemplate("progress",{value:f,barWidth:g},{templateEngine:a.stringTemplateEngine.instance},c),e.addClass("progress"),{controlsDescendantBindings:!0}}},a.bindingHandlers.radio={init:function(a,c){var d=b(a),e=d.find('input[type="radio"]');e.on("change",function(a){var d=b(a.target),e=c(),f=d.val();e(f)})},update:function(c,d){var e=b(c).find('input[value="'+a.unwrap(d())+'"]'),f=e.parent();e.length&&(f.siblings().removeClass("active"),f.addClass("active"),e[0].checked=!0)}},a.bindingHandlers.toggle={init:function(b,c){var d=c();a.utils.registerEventHandler(b,"click",function(){var b=a.unwrap(d);d(!b)})},update:function(b,c){a.utils.toggleDomNodeCssClass(b,"active",a.unwrap(c()))}},a.bindingHandlers.tooltip={init:function(c){var d=b(c);a.utils.domNodeDisposal.addDisposeCallback(c,function(){d.data("bs.tooltip")&&d.tooltip("destroy")})},update:function(c,d){var e=b(c),f=a.unwrap(d()),g=a.utils.unwrapProperties(f),h=e.data("bs.tooltip");h?a.utils.extend(h.options,g):e.tooltip(g)}}});